!function(){function e(e){window.URL?d.src=window.URL.createObjectURL(e):d.src=e,d.onerror=function(){e.stop()},e.onended=i}function i(e){var i="No camera available.";1==e.code&&(i="User denied access to use camera."),alert(i)}function n(){g=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e3),g.position.z=500,m=new THREE.TrackballControls(g),m.rotateSpeed=1,m.zoomSpeed=1.2,m.panSpeed=.8,m.noZoom=!1,m.noPan=!1,m.staticMoving=!0,m.dynamicDampingFactor=.3,m.keys=[65,83,68],m.addEventListener("change",a),c=new THREE.Scene;for(var e=new THREE.CylinderGeometry(0,10,30,4,1),i=new THREE.MeshPhongMaterial({color:16777215,shading:THREE.FlatShading}),n=0;n<500;n++){var o=new THREE.Mesh(e,i);o.position.x=1e3*(Math.random()-.5),o.position.y=1e3*(Math.random()-.5),o.position.z=1e3*(Math.random()-.5),o.updateMatrix(),o.matrixAutoUpdate=!1,c.add(o)}light=new THREE.DirectionalLight(16777215),light.position.set(1,1,1),c.add(light),light=new THREE.DirectionalLight(8840),light.position.set(-1,-1,-1),c.add(light),light=new THREE.AmbientLight(2236962),c.add(light),w=new THREE.WebGLRenderer({antialias:!1}),w.setPixelRatio(window.devicePixelRatio),w.setSize(window.innerWidth,window.innerHeight),r=document.getElementById("container"),r.appendChild(w.domElement),videoImage=document.createElement("canvas"),videoImage.width=window.innerWidth,videoImage.height=window.innerHeight,videoImageContext=videoImage.getContext("2d"),videoImageContext.fillStyle="#000000",videoImageContext.fillRect(0,0,videoImage.width,videoImage.height),videoTexture=new THREE.Texture(videoImage),videoTexture.minFilter=THREE.LinearFilter,videoTexture.magFilter=THREE.LinearFilter,movieMaterial=new THREE.MeshBasicMaterial({map:videoTexture}),movieGeometry=new THREE.PlaneGeometry(2,2,0),movieScreen=new THREE.Mesh(movieGeometry,movieMaterial),movieScreen.material.depthTest=!1,movieScreen.material.depthWrite=!1,backgroundScene=new THREE.Scene,backgroundCamera=new THREE.Camera,backgroundScene.add(backgroundCamera),backgroundScene.add(movieScreen),window.addEventListener("resize",t,!1),a()}function t(){g.aspect=window.innerWidth/window.innerHeight,g.updateProjectionMatrix(),w.setSize(window.innerWidth,window.innerHeight),m.handleResize(),a()}function o(){requestAnimationFrame(o),a(),m.update()}function a(){w.clear(),video.readyState===video.HAVE_ENOUGH_DATA&&(videoImageContext.drawImage(video,0,0),videoTexture&&(videoTexture.needsUpdate=!0)),w.autoClear=!1,w.render(backgroundScene,backgroundCamera),w.render(c,g)}video=document.createElement("video"),video.id="monitor",video.width=window.innerWidth,video.height=window.innerHeight,document.body.appendChild(video),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,window.URL=window.URL||window.webkitURL;var d=document.getElementById("monitor");navigator.getUserMedia?navigator.getUserMedia({video:!0,audio:!0},e,i):alert("Sorry. <code>navigator.getUserMedia()</code> is not available.");var r,g,m,c,w;n(),o()}();